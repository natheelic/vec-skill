# ESP32 Smart Control System (FreeRTOS)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ ESP32 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **FreeRTOS Task** ‡πÅ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà

- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏° Start / Emergency
- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏ü (LDR ‚Üí Relay)
- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå (VR ‚Üí PWM)
- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ú‡πà‡∏≤‡∏ô LCD I2C

---

## üß© Hardware ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- ESP32
- LDR (‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö GPIO34)
- VR (Potentiometer) ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö GPIO35
- Relay Module (GPIO25)
- DC Motor (GPIO26 - PWM)
- ‡∏õ‡∏∏‡πà‡∏° Start (GPIO18)
- ‡∏õ‡∏∏‡πà‡∏° Emergency (GPIO19)
- LCD I2C (Address 0x27)

---

## ‚öôÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (FreeRTOS Tasks)

### 1Ô∏è‚É£ TaskButton (Priority ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏° Start ‡πÅ‡∏•‡∏∞ Emergency
- Emergency ‚Üí ‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- Start ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

### 2Ô∏è‚É£ TaskLDR
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÅ‡∏™‡∏á‡∏à‡∏≤‡∏Å LDR (0‚Äì4095)
- ‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏á < 300 ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü (Relay ON)
- ‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏á ‚â• 300 ‚Üí ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü

### 3Ô∏è‚É£ TaskMotor
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ VR (0‚Äì4095)
- Map ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô PWM (0‚Äì255)
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (0‚Äì100%)

### 4Ô∏è‚É£ TaskDisplay
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏™‡∏á (Lux ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡πà‡∏≤‡∏ß ‡πÜ)
- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà Active ‚Üí ‡πÅ‡∏™‡∏î‡∏á ‚ÄúSystem STOPPED‚Äù

---

## üß† ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

```cpp
volatile bool systemActive
volatile int currentLDRValue
volatile int currentMotorPercent
```

‡πÉ‡∏ä‡πâ `volatile` ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏•‡∏≤‡∏¢ Task

---

## üîå PWM Setting (ESP32)

- Frequency: 5000 Hz
- Resolution: 8-bit
- PWM Range: 0‚Äì255

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **Start** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö
2. ‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏á‡∏ô‡πâ‡∏≠‡∏¢ (<300) ‚Üí ‡πÑ‡∏ü‡∏à‡∏∞‡∏ï‡∏¥‡∏î
3. ‡∏´‡∏°‡∏∏‡∏ô VR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå
4. ‡∏Å‡∏î **Emergency** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

---

## üìå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- ‡∏Ñ‡πà‡∏≤ Lux ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤ Raw ‡∏à‡∏≤‡∏Å ADC (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏à‡∏£‡∏¥‡∏á)
- ESP32 ADC ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö 12-bit (0‚Äì4095)
- TaskButton ‡∏°‡∏µ Priority ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

---

## üë®‚Äçüíª ‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤
Natheelic
